From c25cadde654666cb28a207d6dd35525c4695f7ef Mon Sep 17 00:00:00 2001
From: void-alive <sja9284@gmail.com>
Date: Tue, 18 Feb 2025 11:24:02 +0900
Subject: [PATCH] =?UTF-8?q?=EA=B3=B5=EC=A7=80=EC=82=AC=ED=95=AD,=20?=
 =?UTF-8?q?=EC=9D=B4=EB=B2=A4=ED=8A=B8,=20=EC=9D=B8=EC=9B=90=EB=AA=A8?=
 =?UTF-8?q?=EC=A7=91=20=ED=8E=98=EC=9D=B4=EC=A7=95=20=EC=B2=98=EB=A6=AC=20?=
 =?UTF-8?q?=EC=99=84=EB=A3=8C?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 .../controller/BoardController.java           | 27 +++++++++---------
 .../repository/BoardRepository.java           |  7 +++--
 .../e2teamproject/service/BoardService.java   | 11 ++++----
 .../service/BoardServiceImpl.java             | 25 ++++++++++++-----
 .../resources/templates/board/crewPage.html   | 23 +++++++++++++++
 .../resources/templates/board/eventPage.html  | 23 +++++++++++++++
 .../resources/templates/board/noticePage.html | 28 ++++++++++++++++++-
 7 files changed, 115 insertions(+), 29 deletions(-)

diff --git a/src/main/java/bitc/fullstack503/e2teamproject/controller/BoardController.java b/src/main/java/bitc/fullstack503/e2teamproject/controller/BoardController.java
index 351a44e..0ed1560 100644
--- a/src/main/java/bitc/fullstack503/e2teamproject/controller/BoardController.java
+++ b/src/main/java/bitc/fullstack503/e2teamproject/controller/BoardController.java
@@ -5,6 +5,7 @@ import bitc.fullstack503.e2teamproject.entity.BoardImageEntity;
 import bitc.fullstack503.e2teamproject.service.BoardImageService;
 import bitc.fullstack503.e2teamproject.service.BoardService;
 import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.data.domain.Page;
 import org.springframework.stereotype.Controller;
 import org.springframework.web.bind.annotation.*;
 import org.springframework.web.multipart.MultipartFile;
@@ -27,12 +28,12 @@ public class BoardController {
   @RequestMapping("/jiHyunCRUDTest")
   public ModelAndView jiHyunCRUDTest() {
     ModelAndView mav = new ModelAndView("/board/jiHyunCRUDTest");
-    List<BoardEntity> findNoticeList = boardService.findNotice();
-    List<BoardEntity> findEventList = boardService.findEvent();
-    List<BoardEntity> findCrewList = boardService.findCrew();
-    mav.addObject("findNoticeList", findNoticeList);
-    mav.addObject("findEventList", findEventList);
-    mav.addObject("findCrewList", findCrewList);
+//    List<BoardEntity> findNoticeList = boardService.findNotice(page);
+//    List<BoardEntity> findEventList = boardService.findEvent();
+//    List<BoardEntity> findCrewList = boardService.findCrew();
+//    mav.addObject("findNoticeList", findNoticeList);
+//    mav.addObject("findEventList", findEventList);
+//    mav.addObject("findCrewList", findCrewList);
     return mav;
   }
 
@@ -68,9 +69,9 @@ public class BoardController {
 
   //  공지 보기
   @RequestMapping("/notice")
-  public ModelAndView noticeRead() {
+  public ModelAndView noticeRead(@RequestParam(value = "page", defaultValue = "0") int page) {
     ModelAndView mav = new ModelAndView("/board/noticePage");
-    List<BoardEntity> findNoticeList = boardService.findNotice();
+    Page<BoardEntity> findNoticeList = boardService.findNotice(page);
     mav.addObject("findNoticeList", findNoticeList);
     return mav;
   }
@@ -78,7 +79,7 @@ public class BoardController {
   //  공지 네개씩만 보기
   @ResponseBody
   @RequestMapping("/notice/four")
-  public List<BoardEntity> noticeReadFour(){
+  public List<BoardEntity> noticeReadFour() {
     return boardService.findNoticeFour();
   }
 
@@ -117,9 +118,9 @@ public class BoardController {
 
   //  이벤트 보기
   @RequestMapping("/event")
-  public ModelAndView eventRead() {
+  public ModelAndView eventRead(@RequestParam(value = "page", defaultValue = "0") int page) {
     ModelAndView mav = new ModelAndView("/board/eventPage");
-    List<BoardEntity> findEventList = boardService.findEvent();
+    Page<BoardEntity> findEventList = boardService.findEvent(page);
     mav.addObject("findEventList", findEventList);
     return mav;
   }
@@ -166,9 +167,9 @@ public class BoardController {
 
   //  인원 모집 보기
   @RequestMapping("/crew")
-  public ModelAndView crewRead() {
+  public ModelAndView crewRead(@RequestParam(value = "page", defaultValue = "0") int page) {
     ModelAndView mav = new ModelAndView("/board/crewPage");
-    List<BoardEntity> findCrewList = boardService.findCrew();
+    Page<BoardEntity> findCrewList = boardService.findCrew(page);
     mav.addObject("findCrewList", findCrewList);
     return mav;
   }
diff --git a/src/main/java/bitc/fullstack503/e2teamproject/repository/BoardRepository.java b/src/main/java/bitc/fullstack503/e2teamproject/repository/BoardRepository.java
index a922bd0..ad4d646 100644
--- a/src/main/java/bitc/fullstack503/e2teamproject/repository/BoardRepository.java
+++ b/src/main/java/bitc/fullstack503/e2teamproject/repository/BoardRepository.java
@@ -1,6 +1,7 @@
 package bitc.fullstack503.e2teamproject.repository;
 
 import bitc.fullstack503.e2teamproject.entity.BoardEntity;
+import org.springframework.data.domain.Page;
 import org.springframework.data.domain.Pageable;
 import org.springframework.data.jpa.repository.JpaRepository;
 import org.springframework.data.jpa.repository.Modifying;
@@ -25,7 +26,7 @@ public interface BoardRepository extends JpaRepository<BoardEntity, Integer> {
 
   //  공지사항 찾아서 읽어오기
   @Query("select b from BoardEntity as b where b.category = '공지사항' order by b.board_idx desc")
-  List<BoardEntity> queryFindNotice();
+  Page<BoardEntity> queryFindNotice(Pageable pageable);
 
   //  공지사항 네개씩 읽어오기
   @Query("select b from BoardEntity as b where b.category='공지사항' order by b.board_idx desc")
@@ -56,7 +57,7 @@ public interface BoardRepository extends JpaRepository<BoardEntity, Integer> {
 
   //  이벤트 찾아서 읽어오기
   @Query("select b from BoardEntity as b where b.category = '이벤트' order by b.board_idx desc")
-  List<BoardEntity> queryFindEvent();
+  Page<BoardEntity> queryFindEvent(Pageable pageable);
 
   //  이벤트 네개씩 읽어오기
   @Query("select b from BoardEntity as b where b.category='이벤트' order by b.board_idx desc")
@@ -87,7 +88,7 @@ public interface BoardRepository extends JpaRepository<BoardEntity, Integer> {
 
   //    인원모집 찾아서 읽어오기
   @Query("select b from BoardEntity as b where b.category = '인원모집' order by b.board_idx desc")
-  List<BoardEntity> queryFindCrew();
+  Page<BoardEntity> queryFindCrew(Pageable pageable);
 
   //  인원모집 수정하기
   @Modifying
diff --git a/src/main/java/bitc/fullstack503/e2teamproject/service/BoardService.java b/src/main/java/bitc/fullstack503/e2teamproject/service/BoardService.java
index 7970811..e33e7bd 100644
--- a/src/main/java/bitc/fullstack503/e2teamproject/service/BoardService.java
+++ b/src/main/java/bitc/fullstack503/e2teamproject/service/BoardService.java
@@ -1,6 +1,7 @@
 package bitc.fullstack503.e2teamproject.service;
 
 import bitc.fullstack503.e2teamproject.entity.BoardEntity;
+import org.springframework.data.domain.Page;
 import org.springframework.web.bind.annotation.RequestParam;
 
 
@@ -8,7 +9,7 @@ import java.util.List;
 
 public interface BoardService {
   //  공지 읽기
-  List<BoardEntity> findNotice();
+  Page<BoardEntity> findNotice(int page);
 
   //  공지 네개씩만 나오게
   List<BoardEntity> findNoticeFour();
@@ -28,8 +29,8 @@ public interface BoardService {
   //  공지 삭제하기
   void deleteNotice(@RequestParam("noticeNumberDelete") int noticeNumberDelete);
 
-  //  이벤트 읽기
-  List<BoardEntity> findEvent();
+  //  이벤트 조회하기
+  Page<BoardEntity> findEvent(int page);
 
   //  이벤트 네개씩만 보기
   List<BoardEntity> findEventFour();
@@ -46,8 +47,8 @@ public interface BoardService {
   //  이벤트 삭제하기
   void deleteEvent(@RequestParam("eventNumberDelete") int eventNumberDelete);
 
-  //  인원 모집 읽기
-  List<BoardEntity> findCrew();
+  //  인원 모집 조회하기
+  Page<BoardEntity> findCrew(int page);
 
   //  인원 모집 쓰기
   void writeCrew(@RequestParam("crewTitleCreate") String crewTitleCreate,
diff --git a/src/main/java/bitc/fullstack503/e2teamproject/service/BoardServiceImpl.java b/src/main/java/bitc/fullstack503/e2teamproject/service/BoardServiceImpl.java
index e3b0e39..96aa0cb 100644
--- a/src/main/java/bitc/fullstack503/e2teamproject/service/BoardServiceImpl.java
+++ b/src/main/java/bitc/fullstack503/e2teamproject/service/BoardServiceImpl.java
@@ -3,13 +3,15 @@ package bitc.fullstack503.e2teamproject.service;
 import bitc.fullstack503.e2teamproject.entity.BoardEntity;
 import bitc.fullstack503.e2teamproject.repository.BoardRepository;
 import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.data.domain.Page;
 import org.springframework.data.domain.PageRequest;
 import org.springframework.data.domain.Pageable;
+import org.springframework.data.domain.Sort;
 import org.springframework.stereotype.Service;
 
+import java.util.ArrayList;
 import java.util.List;
 
-import java.util.Optional;
 import java.util.Optional;
 
 @Service
@@ -25,8 +27,11 @@ public class BoardServiceImpl implements BoardService {
 
   //  공지 읽기
   @Override
-  public List<BoardEntity> findNotice() {
-    return boardRepository.queryFindNotice();
+  public Page<BoardEntity> findNotice(int page) {
+    List<Sort.Order> sorts = new ArrayList<>();
+    sorts.add(Sort.Order.desc("board_idx"));
+    Pageable pageable = PageRequest.of(page,10,Sort.by(sorts));
+    return boardRepository.queryFindNotice(pageable);
   }
 
   //  공지 네개씩만 나오게
@@ -64,8 +69,11 @@ public class BoardServiceImpl implements BoardService {
 
   //  이벤트 조회하기
   @Override
-  public List<BoardEntity> findEvent() {
-    return boardRepository.queryFindEvent();
+  public Page<BoardEntity> findEvent(int page) {
+    List<Sort.Order> sorts = new ArrayList<>();
+    sorts.add(Sort.Order.desc("board_idx"));
+    Pageable pageable = PageRequest.of(page,10,Sort.by(sorts));
+    return boardRepository.queryFindEvent(pageable);
   }
 
   //  이벤트 네개씩만 보기
@@ -95,8 +103,11 @@ public class BoardServiceImpl implements BoardService {
 
   //  인원 모집 조회하기
   @Override
-  public List<BoardEntity> findCrew() {
-    return boardRepository.queryFindCrew();
+  public Page<BoardEntity> findCrew(int page) {
+    List<Sort.Order> sorts = new ArrayList<>();
+    sorts.add(Sort.Order.desc("board_idx"));
+    Pageable pageable = PageRequest.of(page,10,Sort.by(sorts));
+    return boardRepository.queryFindCrew(pageable);
   }
 
   //  인원 모집 쓰기
diff --git a/src/main/resources/templates/board/crewPage.html b/src/main/resources/templates/board/crewPage.html
index 906b3b5..d8cef05 100644
--- a/src/main/resources/templates/board/crewPage.html
+++ b/src/main/resources/templates/board/crewPage.html
@@ -60,6 +60,29 @@
               style="border-style: none; border-radius: 10px; background-color: #ffe8a1;">작성하기
       </button>
     </div>
+
+    <!-- 페이징처리 시작 -->
+    <div th:if="${!findCrewList.isEmpty()}">
+      <ul class="pagination justify-content-center">
+        <li class="page-item" th:classappend="${!findCrewList.hasPrevious} ? 'disabled'">
+          <a class="page-link"
+             th:href="@{|?page=${findCrewList.number-1}|}">
+            <span>이전</span>
+          </a>
+        </li>
+        <li th:each="page: ${#numbers.sequence(0, findCrewList.totalPages-1)}"
+            th:classappend="${page == findCrewList.number} ? 'active'"
+            class="page-item">
+          <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
+        </li>
+        <li class="page-item" th:classappend="${!findCrewList.hasNext} ? 'disabled'">
+          <a class="page-link" th:href="@{|?page=${findCrewList.number+1}|}">
+            <span>다음</span>
+          </a>
+        </li>
+      </ul>
+    </div>
+    <!-- 페이징처리 끝 -->
   </div>
 </section>
 
diff --git a/src/main/resources/templates/board/eventPage.html b/src/main/resources/templates/board/eventPage.html
index 14ad9d7..2b9515c 100644
--- a/src/main/resources/templates/board/eventPage.html
+++ b/src/main/resources/templates/board/eventPage.html
@@ -44,6 +44,29 @@
           </div>
         </li>
       </ul>
+
+      <!-- 페이징처리 시작 -->
+      <div th:if="${!findEventList.isEmpty()}">
+        <ul class="pagination justify-content-center">
+          <li class="page-item" th:classappend="${!findEventList.hasPrevious} ? 'disabled'">
+            <a class="page-link"
+               th:href="@{|?page=${findEventList.number-1}|}">
+              <span>이전</span>
+            </a>
+          </li>
+          <li th:each="page: ${#numbers.sequence(0, findEventList.totalPages-1)}"
+              th:classappend="${page == findEventList.number} ? 'active'"
+              class="page-item">
+            <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
+          </li>
+          <li class="page-item" th:classappend="${!findEventList.hasNext} ? 'disabled'">
+            <a class="page-link" th:href="@{|?page=${findEventList.number+1}|}">
+              <span>다음</span>
+            </a>
+          </li>
+        </ul>
+      </div>
+      <!-- 페이징처리 끝 -->
     </div>
   </div>
 </section>
diff --git a/src/main/resources/templates/board/noticePage.html b/src/main/resources/templates/board/noticePage.html
index 1d962ea..5c643e3 100644
--- a/src/main/resources/templates/board/noticePage.html
+++ b/src/main/resources/templates/board/noticePage.html
@@ -19,7 +19,10 @@
 
 <section class="container-fluid" style="margin-top: 10px; border-top: solid 1px; border-top-color: #bee5eb;">
   <div class="container-sm" style="width: 800px; padding-top: 10px; margin-top: 30px;">
-    <div><h4 style="font-weight: bold;">공지사항</h4><p>다양한 소식을 알려드립니다.</p></div>
+    <div>
+      <h4 style="font-weight: bold;">공지사항</h4>
+      <p>다양한 소식을 알려드립니다.</p>
+    </div>
     <div>
       <ul style="list-style: none; padding-left: 0">
         <li>
@@ -45,6 +48,29 @@
           </div>
         </li>
       </ul>
+
+      <!-- 페이징처리 시작 -->
+      <div th:if="${!findNoticeList.isEmpty()}">
+        <ul class="pagination justify-content-center">
+          <li class="page-item" th:classappend="${!findNoticeList.hasPrevious} ? 'disabled'">
+            <a class="page-link"
+               th:href="@{|?page=${findNoticeList.number-1}|}">
+              <span>이전</span>
+            </a>
+          </li>
+          <li th:each="page: ${#numbers.sequence(0, findNoticeList.totalPages-1)}"
+              th:classappend="${page == findNoticeList.number} ? 'active'"
+              class="page-item">
+            <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
+          </li>
+          <li class="page-item" th:classappend="${!findNoticeList.hasNext} ? 'disabled'">
+            <a class="page-link" th:href="@{|?page=${findNoticeList.number+1}|}">
+              <span>다음</span>
+            </a>
+          </li>
+        </ul>
+      </div>
+      <!-- 페이징처리 끝 -->
     </div>
   </div>
 </section>
-- 
2.47.0.windows.2

